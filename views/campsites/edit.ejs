<% layout('layouts/boilerplate') %>
<div class="container my-5 d-flex justify-content-center align-items-center">
  <div class="col-11 col-md-8">
    <div class="card shadow">
      <div class="card-body">
        <h2 class="card-title text-center">Edit Campsite</h2>
        <div class="card-text">
          <form
            action="/campsites/<%= campsite.id %>?_method=PUT"
            method="POST"
            enctype="multipart/form-data"
            novalidate
            class="validated-form"
          >
            <div class="mb-3">
              <label for="title" class="form-label">Name</label>
              <input
                type="text"
                name="campsite[title]"
                id="title"
                class="form-control"
                value="<%= campsite.title %>"
                required
              />
              <div class="valid-feedback">Looks good!</div>
              <div class="invalid-feedback">
                Please include the campsite name.
              </div>
            </div>
            <div class="mb-3">
              <label for="location" class="form-label">Location</label>
              <input
                type="text"
                name="campsite[location]"
                id="location"
                class="form-control"
                value="<%= campsite.location %>"
                required
              />
              <div class="valid-feedback">Looks good!</div>
              <div class="invalid-feedback">Please include the location.</div>
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea
                type="text"
                name="campsite[description]"
                id="description"
                placeholder="description"
                class="form-control"
                required
              >
<%= campsite.description %></textarea
              >
              <div class="valid-feedback">Looks good!</div>
              <div class="invalid-feedback">
                Please include a short description.
              </div>
            </div>
            <div class="mb-3">
              <label for="price" class="form-label">Price per night</label>
              <div class="input-group">
                <span class="input-group-text">Â£</span>
                <input
                  type="text"
                  class="form-control"
                  id="price"
                  placeholder="0.00"
                  name="campsite[price]"
                  aria-label="Amount (to the nearest pound)"
                  value="<%= campsite.price %>"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
                <div class="invalid-feedback">
                  Please include a valid price.
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label for="image" class="form-label">Add more images</label>
              <input
                type="file"
                name="images"
                id="imgUpload"
                class="form-control"
                multiple
              />
              <div
                id="imgPreview"
                class="d-flex row justify-content-start"
              ></div>
            </div>
            <div class="mb-3">
              <label for="currentImages">Current images</label>
              <div class="row">
                <% campsite.images.forEach(function(img, i) { %>
                <div class="col-4">
                  <img src="<%= img.thumbnail %>" class="img-thumbnail" />
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      value="<%= img.filename %>"
                      id="image-<%= i %>"
                      name="deleteImages[]"
                    />
                    <label class="form-check-label" for="image-<%= i %>">
                      Delete this image
                    </label>
                  </div>
                </div>
                <% }); %>
              </div>
            </div>
            <div class="mb-3 row">
              <a
                class="btn btn-danger mx-3 col"
                href="/campsites/<%= campsite.id %> "
                >Cancel</a
              >
              <button class="btn btn-success col align-self-end">Update</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
